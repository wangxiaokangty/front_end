{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { ElMessage } from 'element-plus';\nimport router from './router';\nimport store from './store';\n\n// axios.defaults.baseURL = \"/https://mock.apifox.com/m1/3650195-0-default\"\naxios.defaults.baseURL = \"http://localhost:8080\";\n\n// 前置拦截\naxios.interceptors.request.use(config => {\n  console.log(store.token);\n  console.log(\"sss1\");\n  config.headers.Authorization = this.$store.token;\n  return config;\n}, err => {\n  //请求错误的回调\n  Promise.reject(err);\n});\naxios.interceptors.response.use(response => {\n  let res = response.data;\n  console.log(\"chenggong\");\n  console.log(\"=================\");\n  console.log(res);\n  console.log(\"=================\");\n  console.log(\"sss\");\n  console.log(response);\n  if (res.code === 401) {\n    router.push(\"/BlogLogin\");\n    return response;\n  }\n  if (res.code === 201) {\n    return response;\n  } else {\n    ElMessage.error('出现了一条错误信息');\n    return response;\n  }\n}, error => {\n  console.log(\"失败\");\n  console.log(error);\n  console.log(error.code);\n  if (error.response.data) {\n    error.message = error.response.data.msg;\n  }\n  if (error.code === 401) {\n    store.commit(\"REMOVE_INFO\");\n    router.push(\"/BlogLogin\");\n  }\n  ElMessage.error('Oops, this is a error message.');\n  return Promise.reject(error);\n});","map":{"version":3,"names":["axios","ElMessage","router","store","defaults","baseURL","interceptors","request","use","config","console","log","token","headers","Authorization","$store","err","Promise","reject","response","res","data","code","push","error","message","msg","commit"],"sources":["/Users/wangxiaokang/Desktop/SpringBoot/vue-project/src/axios.js"],"sourcesContent":["import axios from 'axios'\nimport { ElMessage } from 'element-plus'\nimport router from './router'\nimport store from './store'\n\n// axios.defaults.baseURL = \"/https://mock.apifox.com/m1/3650195-0-default\"\naxios.defaults.baseURL = \"http://localhost:8080\"\n\n// 前置拦截\naxios.interceptors.request.use((config) => {\n        console.log(store.token)\n        console.log(\"sss1\")\n    config.headers.Authorization = this.$store.token\n    return config\n},\n    (err)=>{\n        //请求错误的回调\n        Promise.reject(err)\n    })\n\naxios.interceptors.response.use(response => {\n        let res = response.data;\n\n        console.log(\"chenggong\")\n        console.log(\"=================\")\n        console.log(res)\n        console.log(\"=================\")\n        console.log(\"sss\")\n        console.log(response)\n\n        if(res.code === 401){\n            router.push(\"/BlogLogin\")\n            return response\n        }\n\n        if (res.code === 201) {\n            return response\n        } else {\n\n            ElMessage.error('出现了一条错误信息')\n\n            return response\n\n        }\n    },\n    error => {\n        console.log(\"失败\")\n        console.log(error)\n        console.log(error.code)\n        if(error.response.data) {\n            error.message = error.response.data.msg\n        }\n\n        if(error.code === 401) {\n            store.commit(\"REMOVE_INFO\")\n            router.push(\"/BlogLogin\")\n        }\n\n        ElMessage.error('Oops, this is a error message.')\n        return Promise.reject(error)\n    }\n)\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,cAAc;AACxC,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;;AAE3B;AACAH,KAAK,CAACI,QAAQ,CAACC,OAAO,GAAG,uBAAuB;;AAEhD;AACAL,KAAK,CAACM,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EACnCC,OAAO,CAACC,GAAG,CAACR,KAAK,CAACS,KAAK,CAAC;EACxBF,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;EACvBF,MAAM,CAACI,OAAO,CAACC,aAAa,GAAG,IAAI,CAACC,MAAM,CAACH,KAAK;EAChD,OAAOH,MAAM;AACjB,CAAC,EACIO,GAAG,IAAG;EACH;EACAC,OAAO,CAACC,MAAM,CAACF,GAAG,CAAC;AACvB,CAAC,CAAC;AAENhB,KAAK,CAACM,YAAY,CAACa,QAAQ,CAACX,GAAG,CAACW,QAAQ,IAAI;EACpC,IAAIC,GAAG,GAAGD,QAAQ,CAACE,IAAI;EAEvBX,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;EACxBD,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;EAChCD,OAAO,CAACC,GAAG,CAACS,GAAG,CAAC;EAChBV,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;EAChCD,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;EAClBD,OAAO,CAACC,GAAG,CAACQ,QAAQ,CAAC;EAErB,IAAGC,GAAG,CAACE,IAAI,KAAK,GAAG,EAAC;IAChBpB,MAAM,CAACqB,IAAI,CAAC,YAAY,CAAC;IACzB,OAAOJ,QAAQ;EACnB;EAEA,IAAIC,GAAG,CAACE,IAAI,KAAK,GAAG,EAAE;IAClB,OAAOH,QAAQ;EACnB,CAAC,MAAM;IAEHlB,SAAS,CAACuB,KAAK,CAAC,WAAW,CAAC;IAE5B,OAAOL,QAAQ;EAEnB;AACJ,CAAC,EACDK,KAAK,IAAI;EACLd,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC;EACjBD,OAAO,CAACC,GAAG,CAACa,KAAK,CAAC;EAClBd,OAAO,CAACC,GAAG,CAACa,KAAK,CAACF,IAAI,CAAC;EACvB,IAAGE,KAAK,CAACL,QAAQ,CAACE,IAAI,EAAE;IACpBG,KAAK,CAACC,OAAO,GAAGD,KAAK,CAACL,QAAQ,CAACE,IAAI,CAACK,GAAG;EAC3C;EAEA,IAAGF,KAAK,CAACF,IAAI,KAAK,GAAG,EAAE;IACnBnB,KAAK,CAACwB,MAAM,CAAC,aAAa,CAAC;IAC3BzB,MAAM,CAACqB,IAAI,CAAC,YAAY,CAAC;EAC7B;EAEAtB,SAAS,CAACuB,KAAK,CAAC,gCAAgC,CAAC;EACjD,OAAOP,OAAO,CAACC,MAAM,CAACM,KAAK,CAAC;AAChC,CACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}